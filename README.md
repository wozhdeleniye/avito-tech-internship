## PullRequestController

Приложение по тестовому заданию avito-tech: хранит команды, пользователей и pull requests.

**Билд проекта**

1. В корне репозитория запустите:

```powershell
docker-compose up
```

2. Сервис по умолчанию будет доступен на `http://localhost:8085`.

**Где смотреть конфигурацию**

- Переменные хранятся в `docker-compose.yml` в app:environment.
- Миграции выполняются при старте сервера и дропает все ранее существовавшие таблицы в БД.

**Моя коллекция с постмана для тестирования**

[Postman Collection](https://drive.google.com/file/d/1hkPz9TZgiZ_kLa-zYnxlUcgQm-uNdn-V/view?usp=sharing)

# Возникшие трудности

1. странное описание примеров id в openapi файле - сделал custom id, который возможно хотели использовать как уникальный неймтег как в телеграмме(зачем такая придумка если можно было б сделать полноценную апку с авторизацией). имею ввиду id у pull_request и user, которые приходят на вход в апи

2. не до конца понимал и понимаю предметную обасть. по сути пользователь не может существовать вне группы. по сути это должен быть грубый инструмент для группировки людей. зачем тогда для этого делать сервис - непонятно. почему-то думал про гипотетическую масштабируемость и независимость от других сервисов. все-таки из задания не до конца понятна предметная область и то как этот сервис может применяться<br /><br />в конечном итоге решил отказаться от возможности авторизации в угоду соответствия заданию. все-таки ломать не делать

3. некоторые операции требовали создания единых тразакций, пришлось получше разобраться с их устройством в gorm

# Дополнительные задачи

1. Был добавлен эндпоинт получения статистики по количеству назначений ревьюером пользователей и количество ревьюеров на PR.

2. Добавил e2e тестирование. Для запуска тестирования необходимо в корне проекта выполнить команду
   ```powershell
   go test ./e2e -v
   ```. Тестирование проводится независимо от самого приложения, так что указанный внутри порт может устареть при изменениях.

4. Добавил метод массовой деактивации пользователей в команде. Метод деактивирует всех пользователей в проекте и перекидывает все Pull Request`ы на рандомных активных членов другой команды. На вход берет id старой и новой команды. На выход отдает список деактивированных пользователей и список переназначений[новый ревьюер, id пул реквеста].
